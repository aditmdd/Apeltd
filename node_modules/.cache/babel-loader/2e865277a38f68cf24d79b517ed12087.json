{"ast":null,"code":"\"use strict\";\n\nimport { arrayify } from \"@ethersproject/bytes\";\nimport { Logger } from \"@ethersproject/logger\";\nimport { version } from \"./_version\";\nconst logger = new Logger(version); // Debugging line for testing browser lib in node\n//const window = { crypto: { getRandomValues: () => { } } };\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis\n\nfunction getGlobal() {\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n\n  throw new Error('unable to locate global object');\n}\n\n;\nconst anyGlobal = getGlobal();\nlet crypto = anyGlobal.crypto || anyGlobal.msCrypto;\n\nif (!crypto || !crypto.getRandomValues) {\n  logger.warn(\"WARNING: Missing strong random number source\");\n  crypto = {\n    getRandomValues: function (buffer) {\n      return logger.throwError(\"no secure random source avaialble\", Logger.errors.UNSUPPORTED_OPERATION, {\n        operation: \"crypto.getRandomValues\"\n      });\n    }\n  };\n}\n\nexport function randomBytes(length) {\n  if (length <= 0 || length > 1024 || length % 1 || length != length) {\n    logger.throwArgumentError(\"invalid length\", \"length\", length);\n  }\n\n  const result = new Uint8Array(length);\n  crypto.getRandomValues(result);\n  return arrayify(result);\n}\n;","map":{"version":3,"sources":["../src.ts/browser-random.ts"],"names":[],"mappings":"AAAA;;AAEA,SAAS,QAAT,QAAyB,sBAAzB;AAEA,SAAS,MAAT,QAAuB,uBAAvB;AACA,SAAS,OAAT,QAAwB,YAAxB;AACA,MAAM,MAAM,GAAG,IAAI,MAAJ,CAAW,OAAX,CAAf,C,CAEA;AACA;AAEA;;AACA,SAAS,SAAT,GAAkB;AAChB,MAAI,OAAO,IAAP,KAAgB,WAApB,EAAiC;AAAE,WAAO,IAAP;AAAc;;AACjD,MAAI,OAAO,MAAP,KAAkB,WAAtB,EAAmC;AAAE,WAAO,MAAP;AAAgB;;AACrD,MAAI,OAAO,MAAP,KAAkB,WAAtB,EAAmC;AAAE,WAAO,MAAP;AAAgB;;AACrD,QAAM,IAAI,KAAJ,CAAU,gCAAV,CAAN;AACD;;AAAA;AAED,MAAM,SAAS,GAAG,SAAS,EAA3B;AAEA,IAAI,MAAM,GAAQ,SAAS,CAAC,MAAV,IAAoB,SAAS,CAAC,QAAhD;;AACA,IAAI,CAAC,MAAD,IAAW,CAAC,MAAM,CAAC,eAAvB,EAAwC;AAEpC,EAAA,MAAM,CAAC,IAAP,CAAY,8CAAZ;AAEA,EAAA,MAAM,GAAG;AACL,IAAA,eAAe,EAAE,UAAS,MAAT,EAA2B;AACxC,aAAO,MAAM,CAAC,UAAP,CAAkB,mCAAlB,EAAuD,MAAM,CAAC,MAAP,CAAc,qBAArE,EAA4F;AAC/F,QAAA,SAAS,EAAE;AADoF,OAA5F,CAAP;AAGH;AALI,GAAT;AAOH;;AAED,OAAM,SAAU,WAAV,CAAsB,MAAtB,EAAoC;AACtC,MAAI,MAAM,IAAI,CAAV,IAAe,MAAM,GAAG,IAAxB,IAAiC,MAAM,GAAG,CAA1C,IAAgD,MAAM,IAAI,MAA9D,EAAsE;AAClE,IAAA,MAAM,CAAC,kBAAP,CAA0B,gBAA1B,EAA4C,QAA5C,EAAsD,MAAtD;AACH;;AAED,QAAM,MAAM,GAAG,IAAI,UAAJ,CAAe,MAAf,CAAf;AACA,EAAA,MAAM,CAAC,eAAP,CAAuB,MAAvB;AACA,SAAO,QAAQ,CAAC,MAAD,CAAf;AACH;AAAA","sourceRoot":"","sourcesContent":["\"use strict\";\r\nimport { arrayify } from \"@ethersproject/bytes\";\r\nimport { Logger } from \"@ethersproject/logger\";\r\nimport { version } from \"./_version\";\r\nconst logger = new Logger(version);\r\n// Debugging line for testing browser lib in node\r\n//const window = { crypto: { getRandomValues: () => { } } };\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis\r\nfunction getGlobal() {\r\n    if (typeof self !== 'undefined') {\r\n        return self;\r\n    }\r\n    if (typeof window !== 'undefined') {\r\n        return window;\r\n    }\r\n    if (typeof global !== 'undefined') {\r\n        return global;\r\n    }\r\n    throw new Error('unable to locate global object');\r\n}\r\n;\r\nconst anyGlobal = getGlobal();\r\nlet crypto = anyGlobal.crypto || anyGlobal.msCrypto;\r\nif (!crypto || !crypto.getRandomValues) {\r\n    logger.warn(\"WARNING: Missing strong random number source\");\r\n    crypto = {\r\n        getRandomValues: function (buffer) {\r\n            return logger.throwError(\"no secure random source avaialble\", Logger.errors.UNSUPPORTED_OPERATION, {\r\n                operation: \"crypto.getRandomValues\"\r\n            });\r\n        }\r\n    };\r\n}\r\nexport function randomBytes(length) {\r\n    if (length <= 0 || length > 1024 || (length % 1) || length != length) {\r\n        logger.throwArgumentError(\"invalid length\", \"length\", length);\r\n    }\r\n    const result = new Uint8Array(length);\r\n    crypto.getRandomValues(result);\r\n    return arrayify(result);\r\n}\r\n;\r\n//# sourceMappingURL=random.js.map"]},"metadata":{},"sourceType":"module"}